body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #111;
  color: #eee;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

header, footer {
  background: #222;
  padding: 10px;
  text-align: center;
}

main#game {
  display: flex;
  flex-direction: row; /* Asegura que la barra lateral y la pantalla estén una al lado de la otra */
  flex: 1;
}

#screen {
  flex: 1; /* Ocupa el espacio restante */
  padding: 15px;
  overflow-y: auto;
  background: #111;
}

#sidebar {
  width: 250px; /* Ancho fijo para el menú delgado */
  padding: 10px;
  background: #1a1a1a;
  display: flex; /* Utiliza flexbox para los elementos internos */
  flex-direction: column;
  gap: 10px;
  overflow-y: auto; /* ¡Añade esto para el scroll vertical! */
}

.card {
  background: #2a2a2a;
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
}

.title {
  font-size: 1.2em;
  font-weight: bold;
  margin-bottom: 8px;
}

.story {
  max-height: 300px; /* Aumenta la altura */
  min-height: 200px; /* Altura mínima */
  overflow-y: auto;
  padding: 10px; /* Más padding */
  border: 1px solid #444; /* Borde más visible */
  border-radius: 5px;
  margin-top: 15px;
  background-color: #1a1a1a; /* Fondo diferenciado */
  flex: 1;
}

.btn {
  display: block;
  width: 100%;
  margin: 5px 0;
  padding: 8px;
  background: #444;
  border: none;
  border-radius: 6px;
  color: white;
  cursor: pointer;
}
.btn:hover {
  background: #666;
}

.direction-buttons {
  display: grid;
  grid-template-areas:
        ". up ."
        "left . right"
        ". down .";
  gap: 5px; /* Espacio entre los botones */
  margin-top: 10px;
  width: 150px; /* Ancho fijo para centrar */
  margin-left: auto;
  margin-right: auto;
}

.direction-buttons .north-btn { grid-area: up; }
.direction-buttons .west-btn { grid-area: left; }
.direction-buttons .east-btn { grid-area: right; }
.direction-buttons .south-btn { grid-area: down; }

.direction-buttons div {
  display: flex;
  gap: 4px;
}

.hidden {
  display: none;
}

/* Mensajes narrativos */
.msg-combat { color: #ff5555; }
.msg-loot { color: #ffaa00; }
.msg-stat { color: #55ff55; }
.msg-shop { color: #00aaff; }

/* Modal tienda */
.modal {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}
.modal.hidden { display: none; }

.modal-content {
  background: #222;
  padding: 20px;
  border-radius: 10px;
  width: 400px;
  max-height: 80vh;
  overflow-y: auto;
}

/* Ending modal */
.ending-modal { text-align:center; width:520px; }
.ending-modal h1 { font-size:1.6em; margin-bottom:8px; }
.ending-stats { display:flex; gap:12px; justify-content:center; margin-top:10px; }
.ending-stats p { margin:0; padding:6px 10px; background:#1a1a1a; border-radius:6px; }

.modal-content h2 {
  margin-top: 0;
  text-align: center;
}

/* Estilo de las barras de progreso */
.stat-bar {
  display: flex;
  align-items: center;
  margin-bottom: 5px;
}

.stat-bar p {
  margin: 0;
  width: 40px; /* Ancho fijo para alinear el texto */
}

.bar-container {
  flex: 1;
  background: #444;
  border: 1px solid #666;
  border-radius: 4px;
  height: 15px;
  position: relative;
  overflow: hidden;
}

.bar {
  height: 100%;
  transition: width 0.3s ease-in-out;
  border-radius: 3px;
}

.bar-text {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8em;
  font-weight: bold;
  color: #fff;
  text-shadow: 1px 1px 2px #000;
}

.hp-bar { background-color: #e74c3c; } /* Rojo para HP */
.mp-bar { background-color: #3498db; } /* Azul para MP */
.xp-bar { background-color: #f1c40f; } /* Amarillo para XP */

.actions-card {
    display: flex;
    flex-direction: column;
}

.action-buttons-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Dos columnas de igual ancho */
    gap: 10px; /* Espacio entre los botones */
    margin-bottom: 10px;
}

/* Reducimos el padding de los botones en esta sección para que sean más compactos */
.action-buttons-grid .btn {
    padding: 10px;
}

.msg-system { color: #888; font-style: italic; }

.msg-narrative { 
  color: #dddddd; 
  margin: 5px 0;
}

.stat-display {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 10px 0;
  padding: 8px;
  background: #2a2a2a;
  border-radius: 5px;
}

.stat-btn {
  width: auto;
  padding: 5px 10px;
  margin: 0;
}

.modal-content h3 {
  border-bottom: 1px solid #444;
  padding-bottom: 5px;
  margin-top: 15px;
}

#inventoryList li, #equipmentList li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 5px 0;
  padding: 5px;
  background: #2a2a2a;
  border-radius: 4px;
}

/* Improved inventory layout */
.inventory-grid { display: grid; grid-template-columns: 1fr 0px; gap: 12px; align-items: start; }
.inventory-list-col { max-height: 380px; overflow-y: auto; padding-right: 6px; }
.inventory-detail-col { background: #232323; padding: 8px; border-radius: 6px; min-height: 160px; max-width: 0px; overflow: hidden; opacity: 0; transition: max-width 220ms ease, opacity 220ms ease; }
.inventory-grid.detail-open { grid-template-columns: 1fr 320px; }
.inventory-grid.detail-open .inventory-detail-col { max-width: 320px; opacity: 1; }
.item-detail-empty { color: #aaa; font-size: 0.9em; padding: 12px; }
.item-detail { display: flex; flex-direction: column; gap: 8px; }
.item-detail-header { display:flex; gap:10px; align-items:center; }
.item-detail-icon { width:48px; height:48px; font-size:28px; display:flex; align-items:center; justify-content:center; background:#2b2b2b; border-radius:6px; }
.detail-name { font-weight:700; font-size:1.1em; }
.detail-meta { font-size:0.85em; color:#bbb; }
.item-detail-body { background:#1d1d1d; padding:8px; border-radius:6px; }
.item-detail-body p { margin:0 0 8px 0; }
.item-detail-actions { display:flex; gap:8px; }

/* close button inside detail */
.close-detail { position: relative; top: -4px; right: -4px; background: transparent; border: 1px solid #333; color: #fff; }

/* Inventory item card */
.inv-item { display:flex; gap:10px; align-items:center; padding:8px; background:linear-gradient(180deg, #252525, #1d1d1d); border-radius:8px; border:1px solid #333; }
.inv-icon { width:40px; height:40px; display:flex; align-items:center; justify-content:center; font-size:22px; background:#161616; border-radius:6px; border:1px solid #333; }
.inv-item-name { font-weight:700; margin-right:8px; }
.inv-item-qty { background:#333; padding:2px 6px; border-radius:10px; font-size:0.85em; color:#eee; }
.inv-item-attrs { color:#bbb; font-size:0.85em; margin-left:auto; margin-right:8px; }
.inv-item .btn { min-width:64px; padding:4px 8px; }

.equip-btn {
  padding: 3px 8px;
  font-size: 0.8em;
}

/* Mejora para los botones de dirección */
.direction-buttons {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 5px;
}

.direction-buttons .btn {
  padding: 8px 5px;
  font-size: 0.9em;
}

/* Estilos para el modal de estadísticas */
.stat-bonus {
  font-size: 0.9em;
  color: #55ff55;
  margin-left: 10px;
}

/* Estilos para menús colapsables - CORREGIDO */
.collapsible {
  margin-bottom: 10px;
  position: relative;
}

.collapsible-header {
  cursor: pointer;
  padding: 10px;
  background: #333;
  border-radius: 5px;
  margin: -10px -10px 0 -10px;
  display: flex;
  align-items: center;
  user-select: none;
  position: relative;
  z-index: 2;
}

.collapsible-header::after {
  content: '▼';
  margin-left: auto;
  font-size: 0.8em;
  transition: transform 0.3s ease;
}

.collapsible-header.collapsed::after {
  transform: rotate(-90deg);
}

.collapsible-content {
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 500px;
  opacity: 1;
}

.collapsible-content.collapsed {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  padding: 0 !important;
}

/* NUNCA usar display: none en el contenido colapsable */
.collapsible-content {
  display: block !important;
}

/* Estado inicial - colapsar algunos menús por defecto */
#stats-content.collapsed,
#quickactions-content.collapsed {
  max-height: 0;
  opacity: 0;
}

/* Stats modal small controls */
.stat-increase-grid { display: flex; flex-direction: column; gap: 8px; margin-top: 8px; }
.stat-row { display:flex; align-items:center; gap:8px; }
.btn.small { padding: 2px 6px; font-size: 0.9em; }
.modal .modal-content .muted { color: #bbb; font-size: 0.9em; margin-top: 8px; }

#stats-content:not(.collapsed),
#quickactions-content:not(.collapsed) {
  max-height: 500px;
  opacity: 1;
}

/* Asegurar que el contenido colapsable tenga padding cuando está expandido */
.collapsible-content:not(.collapsed) {
  padding: 10px 0;
}

/* Estilos específicos para el contenido de stats */
#stats-content {
  padding: 10px 0;
}

#stats-content .stat-bar {
  margin: 8px 0;
}

#stats-content p {
  margin: 5px 0;
  color: #eee;
}

/* Estilos específicos para quick actions */
#quickactions-content {
  padding: 10px 0;
}

#quickactions-content .btn {
  margin: 5px 0;
  width: 100%;
}

/* ========= CRAFTING MODAL ========= */

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.hidden {
  display: none !important;
}

.crafting-container {
  background: #222;
  color: #fff;
  padding: 20px;
  width: 420px;
  border-radius: 8px;
  box-shadow: 0 0 10px #000;
  animation: popIn 0.3s ease;
}

@keyframes popIn {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.crafting-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
}

.crafting-tab {
  flex: 1;
  padding: 6px;
  background: #444;
  border: none;
  cursor: pointer;
  color: #fff;
  border-radius: 6px;
  font-weight: 600;
}

.crafting-tab.active {
  background: #66aaff;
  color: #012;
}

.recipes-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 250px;
  overflow-y: auto;
  border: 1px solid #555;
  padding: 8px;
  margin-bottom: 8px;
}

.recipe-button {
  background: linear-gradient(#2b2b2b,#262626);
  padding: 8px;
  border-radius: 6px;
  cursor: pointer;
  border: 1px solid #3b3b3b;
  color: #fff;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.recipe-button:hover {
  background: #444;
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.6);
}

.recipe-details {
  margin-top: 10px;
  padding: 10px;
  background: #333;
  border-radius: 8px;
  border: 1px solid #555;
}

.close-btn {
  margin-top: 12px;
  width: 100%;
  background: #aa4444;
  color: #fff;
  border: none;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
}

#craftButton {
  margin-top: 10px;
  width: 100%;
  padding: 10px;
  background: #44aa44;
  border: none;
  color: #fff;
  border-radius: 6px;
  cursor: pointer;
}

/* Estilos para el menú principal */
.main-menu {
  max-width: 500px;
  text-align: center;
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  border: 2px solid #0f3460;
  box-shadow: 0 0 20px rgba(15, 52, 96, 0.5);
}

.menu-options {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin: 20px 0;
}

.menu-btn {
  padding: 12px 20px;
  font-size: 18px;
  background: linear-gradient(135deg, #2d3561, #0f3460);
  border: 1px solid #533483;
  border-radius: 5px;
  color: #fff;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.menu-btn:hover {
  background: linear-gradient(135deg, #3a4270, #1a3a6a);
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(83, 52, 131, 0.3);
}

.save-info {
  margin-top: 20px;
  padding: 10px;
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 5px;
  color: #ccc;
  font-size: 14px;
}

/* Estilos para los botones de guardado/carga rápidos */
.save-load-container {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.quick-action-btn {
  flex: 1;
  padding: 8px 12px;
  font-size: 14px;
  background: linear-gradient(135deg, #2d3561, #0f3460);
  border: 1px solid #533483;
  border-radius: 5px;
  color: #fff;
  cursor: pointer;
  transition: all 0.3s ease;
}

.quick-action-btn:hover {
  background: linear-gradient(135deg, #3a4270, #1a3a6a);
  transform: translateY(-1px);
}
/* Estilos para el modal de Game Over */
.game-over-content {
  text-align: center;
  background: linear-gradient(135deg, #3a0b0b, #1a0000);
  border: 2px solid #8b0000;
  color: #ffcccc;
}

.game-over-content h1 {
  font-size: 3em;
  margin-bottom: 20px;
  text-shadow: 0 0 10px #ff0000;
}

.game-over-content p {
  font-size: 1.2em;
  margin-bottom: 30px;
}

/* ================= TOOLTIP ================= */
.tooltip {
  position: relative;
  display: inline-block;          /* se adapta al ancho del texto */
  cursor: help;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: max-content;
  max-width: 220px;
  background-color: #222;
  color: #fff;
  text-align: left;
  border: 1px solid #555;
  border-radius: 6px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;                  /* arriba del elemento */
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.85em;
  line-height: 1.3;
  opacity: 0;
  transition: opacity 0.2s;
}

.tooltip:hover .tooltiptext,
.tooltip:active .tooltiptext {
  visibility: visible;
  opacity: 1;
}

.floating-menu-btn {
  position: fixed;
  bottom: 20px; right: 20px;
  width: 50px; height: 50px;
  border-radius: 50%;
  background: #444; color: #fff;
  border: none; font-size: 1.4em;
  cursor: pointer; z-index: 999;
}
.floating-menu-btn:hover { background: #666; }